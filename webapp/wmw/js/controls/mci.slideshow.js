/**
* h5player v0.0.1 by yangyin 
* Copyright 2014 yangyin@mcitech.cn http://weibo.com/nodersolar
*/
!function(a){"function"==typeof define&&define.amd?define("mci.slideshow",["jquery","mci.support"],a):a(jQuery,Support)}(function(a,b){"use strict";function c(a,c){return b.touch?a.changedTouches[0][c]:a[c]}function d(a,b,c){var d=a,e=+new Date,f=parseInt(d.style[b],10),g=c,h=350,i=function(a,b){return-(a/=b)*(a-2)},j=setInterval(function(){var a,c,k=new Date-e;k>h?(clearInterval(j),c=g):(a=i(k,h),c=a*(g-f)+f),d.style[b]=c+"px"},10)}var e=function(a){return this instanceof e?this.init(a):new e(a)};return e.prototype.init=function(b){var c=this;if(c.options=c.options||{itemWidth:100,itemHeight:100,itemContainerCls:"> .mci-ss-oh >.mci-ss-w",itemCls:".mci-ss-i",itemCount:0,crossEffectType:"fade",crossEffectTime:500,autoPlay:!1,autoPlayInterval:0,clickSupport:!1,slideSupport:!1,slideDirection:-1,defaultDirection:4,loop:!0,loopTime:1,use3d:!0,defaultIndex:0,itemChanged:function(){},syncMoving:function(){},syncMoveEnd:function(){}},c.options=a.extend(c.options,b),c.itemIndex=0,c.itemChanged=c.options.itemChanged,c.loopHandler=null,c.loopHandlerCount=0,c.itemChanging=!1,c.dom=c.options.dom,c.itemContainerDom=c.dom.find(c.options.itemContainerCls+":first-child"),c.itemCount=c.itemContainerDom.children().length,c.scrollerWidth=c.itemCount*c.options.itemWidth,c.scrollerHeight=c.itemCount*c.options.itemHeight,c.scrollWidth=(c.itemCount-1)*c.options.itemWidth,c.scrollHeight=(c.itemCount-1)*c.options.itemHeight,c.isStoped=!0,c.currentX=0,c.currentY=0,c.directionX=0,c.directionY=0,c.options.defaultIndex>=0&&(c.itemIndex=c.options.defaultIndex,(2==c.options.defaultDirection||3==c.options.defaultDirection)&&(c.itemIndex=c.itemCount-1-c.options.defaultIndex)),"scroll"==c.options.crossEffectType||"slide"==c.options.crossEffectType){var d=0;switch(c.options.defaultDirection){case 1:d=c.options.defaultIndex*c.options.itemHeight,c._setY(-d);break;case 2:d=(c.itemCount-c.options.defaultIndex-1)*c.options.itemWidth,c._setX(-d);break;case 3:d=(c.itemCount-c.options.defaultIndex-1)*c.options.itemHeight,c._setY(-d);break;case 4:d=c.options.defaultIndex*c.options.itemWidth,c._setX(-d);break;default:d=c.options.defaultIndex*c.options.itemWidth,c._setX(-d)}c._setItemContainerStyle(-1==c.options.slideDirection?{width:c.options.itemWidth*c.itemCount+"px",height:c.options.itemHeight+"px"}:{height:c.options.itemHeight*c.itemCount+"px",width:c.options.itemWidth+"px"})}else c._setItemContainerStyle({width:c.options.itemWidth+"px",height:c.options.itemHeight+"px"});if("none"==c.options.crossEffectType)switch(c.options.defaultDirection){case 2:d=(c.itemCount-c.options.defaultIndex-1)*c.options.itemWidth,c._setX(-d);break;case 3:d=(c.itemCount-c.options.defaultIndex-1)*c.options.itemHeight,c._setY(-d)}return"flip"==c.options.crossEffectType&&(c.itemIndex=c.options.defaultIndex),c},e.prototype.hasNext=function(){var a=this;return a.itemIndex<a.itemCount-1?!0:!1},e.prototype.hasPrev=function(){var a=this;return a.itemIndex>0?!0:!1},e.prototype.goToNext=function(){var a=this,b=0;a.hasNext()&&(b=a.itemIndex+1),a.goToItem(b),"none"!=a.options.crossEffectType&&a._triggerSyncEnd(b/(a.itemCount-1),a.options.crossEffectTime)},e.prototype.goToPrev=function(){var a=this,b=0;a.hasPrev()?(b=a.itemIndex-1,a.goToItem(b)):(b=a.itemCount-1,a.goToItem(b)),"none"!=a.options.crossEffectType&&a._triggerSyncEnd(b/(a.itemCount-1),a.options.crossEffectTime)},e.prototype.goToItem=function(a){var b=this;if(b.itemChanging)return!1;switch(b.options.crossEffectType){case"fade":b._fade(a);break;case"slide":b._slide(a);break;case"fly":b._zoomIn(a);break;case"fall":b._zoomOut(a);break;case"null":b._nothing(a);break;case"flip":b._flip(a);break;case"none":b._acceler(a);break;case"scroll":b._scroll(a)}},e.prototype.goToState=function(a){var b=this;if("next"==a)b.goToNext();else if("previous"==a)b.goToPrev();else{if(0===a)return b.goToItem(0),void("none"!=b.options.crossEffectType&&b._triggerSyncEnd(c/(b.itemCount-1),b.options.crossEffectTime));var c=b.itemContainerDom.children("#"+a).index();if(-1==c&&a.indexOf(" ")>=0)for(var d=b.itemContainerDom.children(),e=0;e<d.length;e++)if(d[e].id==a){c=e;break}-1!=c&&(b.goToItem(c),"none"!=b.options.crossEffectType&&b._triggerSyncEnd(c/(b.itemCount-1),b.options.crossEffectTime))}},e.prototype._fade=function(a){var b=this;0>a?a=b.itemCount-1:a>b.itemCount-1&&(a=0),b.itemChanging=!1,b.currentX=-a*b.options.itemWidth;var c=b.dom.find(b.options.itemContainerCls).children();b._itemIndex&&c.eq(b._itemIndex).stop(!0,!0),c.eq(b.itemIndex).stop(!0,!0).fadeOut(b.options.crossEffectTime),c.eq(a).stop(!0,!0).fadeIn(b.options.crossEffectTime,function(){b._changeItemIndex(a)}),b._itemIndex=a},e.prototype._slide=function(a){var b=this;0>a?a=1==b.options.loop?b.itemCount-1:0:a>b.itemCount-1&&(a=1==b.options.loop?0:b.itemCount-1),a>=0&&a<=b.itemCount-1&&(b.itemChanging=!0,b._setTransition(!0),-1==b.options.slideDirection?b._setX(-a*b.options.itemWidth):b._setY(-a*b.options.itemHeight),void 0!=a&&a!=b.itemIndex?setTimeout(function(){b._changeItemIndex(a)},b.options.crossEffectTime):b.itemChanging=!1)},e.prototype._scroll=function(a){var b=this;0>a?a=1==b.options.loop?b.itemCount-1:0:a>b.itemCount-1&&(a=1==b.options.loop?0:b.itemCount-1),a>=0&&a<=b.itemCount-1&&(b.itemChanging=!0,b._setTransition(!0),-1==b.options.slideDirection?b._setX(-a*b.options.itemWidth):b._setY(-a*b.options.itemHeight),void 0!=a&&a!=b.itemIndex?setTimeout(function(){b._changeItemIndex(a)},b.options.crossEffectTime):b.itemChanging=!1)},e.prototype._zoomIn=function(a){var c=this;if(0>a&&(a=c.itemCount-1),a>c.itemCount-1&&(a=0),-1==c.options.slideDirection?c.currentX=-a*c.options.itemWidth:c.currentY=-a*c.options.itemHeight,void 0!=c._itemIndex&&(c.itemIndex=c._itemIndex),c.itemIndex!=a){c.itemChanging=!0;var d=c.dom.find(c.options.itemContainerCls+":first-child").children(),e=c.options.crossEffectTime/2;d.eq(c.itemIndex).css({transition:b.getCSSVal("transform")+" "+e+"ms ease,opacity "+e+"ms ease"}),d.eq(c.itemIndex).css({opacity:"0",transform:"scale(2)"}),d.eq(a).css({transition:b.getCSSVal("transform")+" "+e+"ms ease,opacity "+e+"ms ease",display:"block",transform:"scale(0)"}),setTimeout(function(){d.eq(c.itemIndex).css({transition:"",display:"none",transform:"scale(0)"}),d.eq(a).css({opacity:"1",transform:"scale(1)",display:"block"}),c._changeItemIndex(a)},e),c._itemIndex=a}},e.prototype._zoomOut=function(a){var c=this;if(0>a&&(a=c.itemCount-1),a>c.itemCount-1&&(a=0),-1==c.options.slideDirection?c.currentX=-a*c.options.itemWidth:c.currentY=-a*c.options.itemHeight,void 0!=c._itemIndex&&(c.itemIndex=c._itemIndex),c.itemIndex!=a){c.itemChanging=!0;var d=c.dom.find(c.options.itemContainerCls+":first-child").children(),e=c.options.crossEffectTime;d.eq(c.itemIndex).css({transition:b.getCSSVal("transform")+" "+e+"ms ease,opacity "+e+"ms ease"}),d.eq(c.itemIndex).css({opacity:"0",transform:"scale(0)"}),d.eq(a).css({opacity:"0",display:"block",transform:"scale(2)"}),setTimeout(function(){d.eq(c.itemIndex).css({transition:"",display:"none",transform:"scale(0)"}),d.eq(a).css({transition:b.getCSSVal("transform")+" "+e+"ms ease,opacity "+e+"ms ease",opacity:"1",transform:"scale(1)",display:"block"}),c._changeItemIndex(a)},e),c._itemIndex=a}},e.prototype._flip=function(c){var d=this;if(0>c&&(c=d.itemCount-1),c>d.itemCount-1&&(c=0),-1==d.options.slideDirection?d.currentX=-c*d.options.itemWidth:d.currentY=-c*d.options.itemHeight,void 0!=d._itemIndex&&(d.itemIndex=d._itemIndex),d.itemIndex!=c){d.itemChanging=!0;var e=d.itemContainerDom.children();void 0==d.flipRotated&&(d.flipRotated=0);var f=e.eq(c),g=e.eq(d.itemIndex),h=d.options.crossEffectTime;if(b.transform3d&&!a.browser.msie)-1==d.options.slideDirection?(f.css({display:"block",transform:"rotateY("+(d.flipRotated+180)+"deg)",transition:""}),2==d.options.defaultDirection&&c>d.itemIndex||4==d.options.defaultDirection&&c<d.itemIndex?(f.css({transform:"rotateY("+(d.flipRotated-180)+"deg)"}),d.flipRotated=d.flipRotated-180):d.flipRotated=d.flipRotated+180,d.itemContainerDom.css({transition:b.getCSSVal("transform")+" "+h+"ms ease",transform:"perspective(800px) rotateY("+d.flipRotated+"deg)"})):(f.css({display:"block",transform:"rotateX("+(d.flipRotated+180)+"deg)",transition:""}),3==d.options.defaultDirection&&c>d.itemIndex||1==d.options.defaultDirection&&c<d.itemIndex?(f.css({transform:"rotateX("+(d.flipRotated-180)+"deg)"}),d.flipRotated=d.flipRotated-180):d.flipRotated=d.flipRotated+180,d.itemContainerDom.css({transition:b.getCSSVal("transform")+" "+h+"ms ease",transform:"perspective(800px) rotateX("+d.flipRotated+"deg)"}));else{var i=1;-1==d.options.slideDirection?((2==d.options.defaultDirection&&c>d.itemIndex||4==d.options.defaultDirection&&c<d.itemIndex)&&(i=-1),f.css({transform:"skewY("+50*i+"deg) scale(0,1)",transition:""}),g.css({transform:"skewY("+50*i+"deg) scale(0,1)",transition:b.getCSSVal("transform")+" "+h/2+"ms ease"}),setTimeout(function(){f.css({display:"block",transform:"skewY(0deg) scale(1,1)",transition:b.getCSSVal("transform")+" "+h/2+"ms ease"})},h/2+1)):((3==d.options.defaultDirection&&c>d.itemIndex||1==d.options.defaultDirection&&c<d.itemIndex)&&(i=-1),f.css({transform:"skewX("+50*i+"deg) scale(1,0)",transition:""}),g.css({transform:"skewX("+50*i+"deg) scale(1,0)",transition:b.getCSSVal("transform")+" "+h/2+"ms ease"}),setTimeout(function(){f.css({display:"block",transform:"skewX(0deg) scale(1,1)",transition:b.getCSSVal("transform")+" "+h/2+"ms ease"})},h/2+1))}setTimeout(function(){g.css({display:"none"}),d._changeItemIndex(c)},h+5),d._itemIndex=c}},e.prototype._nothing=function(a){var b=this;0>a&&(a=b.itemCount-1),a>b.itemCount-1&&(a=0),b.itemChanging=!0,-1==b.options.slideDirection?b.currentX=-a*b.options.itemWidth:b.currentY=-a*b.options.itemHeight;var c=b.dom.find(b.options.itemContainerCls).children();c.eq(b.itemIndex).css({display:"none"}),c.eq(a).css({display:"block"}),b._changeItemIndex(a)},e.prototype._acceler=function(){function a(){if(0==f||1==b.scrolling)return b.itemChanging=!1,void b._changeItemIndex(h);f--;var c=b._goToItemEvent.direction+h;if((-1==b.options.slideDirection&&2==b.options.defaultDirection||1==b.options.slideDirection&&3==b.options.defaultDirection)&&(c=-1*b._goToItemEvent.direction+h),0>c){if(!b.options.loop)return;c=b.itemCount-1}else if(c>b.itemCount-1){if(!b.options.loop)return;c=0}-1==b.options.slideDirection?b.currentX=-c*b.options.itemWidth:b.currentY=-c*b.options.itemHeight;var d=b.dom.find(b.options.itemContainerCls).children();d.eq(h).css({display:"none"}),d.eq(c).css({display:"block"}),b.itemIndex=h=c,setTimeout(function(){a()},g)}var b=this,c=Math.floor(b.options.itemWidth/(2*b.itemCount));if(b._goToItemEvent){var d=b._goToItemEvent.moved,e=b._momentum(b._goToItemEvent.moved,b.duration);d=e.dist+d;var f=Math.floor(Math.abs(d)/c);b.itemChanging=!0,0==f&&Math.abs(d)>0&&f++;var g=e.time/(f+1),h=b.itemIndex;f>0?a():b.itemChanging=!1}},e.prototype._stopVideoAndAudio=function(b){b.find("video").each(function(){a(this)[0].pause()}),b.find("audio").each(function(){a(this)[0].pause()})},e.prototype._changeItemIndex=function(b){var c=this,d={fromItem:c.itemIndex,toItem:b},e=c.dom.find(c.options.itemContainerCls).children();d.fromId=e.eq(d.fromItem).attr("id"),d.toId=e.eq(d.toItem).attr("id"),d.targetControlId=c.dom.attr("id"),c.itemIndex=b,c._stopVideoAndAudio(e.eq(d.fromItem)),c.itemChanging=!1,a.isFunction(c.itemChanged)&&c.itemChanged(d),d.fromId!=d.toId&&c._startChildControl()},e.prototype._setTransition=function(a){var c=this;c._setItemContainerStyle(a?{transition:b.getCSSVal("transform")+" "+c.options.crossEffectTime+"ms ease"}:{transition:""})},e.prototype._setX=function(b){var c=this;if("none"!=c.options.crossEffectType){var e=c.currentX;if(c.currentX=b,1==c.options.loop&&c.itemCount>1&&c.currentX!=e){var f=c.itemContainerDom.children();if(c.directionX>0){var g=f.eq(c.itemIndex%c.itemCount).index();if(c.currentX<-c.options.itemWidth*c.options.itemCount-1&&g==c.itemCount-1){var h=f.eq(0);h.remove(),a(c.itemContainerDom).append(h),c.itemIndex=c.itemIndex-1,c.currentX=parseInt(c.currentX)+parseInt(c.options.itemWidth)}}else if(c.directionX<0){var g=f.eq(c.itemIndex%c.itemCount).index();if(c.currentX>0&&0==g){var i=f.eq(c.itemCount-1);i.remove(),a(c.itemContainerDom).prepend(i),c.itemIndex=c.itemIndex+1,c.currentX=c.currentX-c.options.itemWidth}}}if(c.options.use3d?c._setItemContainerStyle({transform:c._getTranslate(c.currentX,0,0)}):d(c.itemContainerDom[0],"left",c.currentX),"scroll"==c.options.crossEffectType){var j=Math.abs(c.currentX)%c.options.itemWidth,k=parseInt(Math.abs(b)/c.options.itemWidth,10);j>=.5*c.options.itemWidth&&(k+=1);var l=k;c.itemIndex!=l&&c._changeItemIndex(l)}}else{var m=c.accMoving;if(Math.abs(m-c.accMoved)>=.65*c.options.itemWidth/c.itemCount){var n=m-c.accMoved<0?1:-1;2==c.options.defaultDirection&&(n=m-c.accMoved>0?1:-1);var o=c.itemIndex+n;if(0>o){if(!c.options.loop)return;o=c.itemCount-1}else if(o>c.itemCount-1){if(!c.options.loop)return;o=0}c.accMoved=m,c._nothing(o)}}},e.prototype.scrollTo=function(a,c,d){var e=this;if(e.currentX=a,e.currentY=c,e.options.use3d?e._setItemContainerStyle({transform:e._getTranslate(a,c,0),transition:b.getCSSVal("transform")+" "+d+"ms ease"}):e.itemContainerDom.animate({left:a+"px",top:c+"px"},d),"scroll"==e.options.crossEffectType){var f=0,g=0,h=0;-1==e.options.slideDirection?(f=Math.abs(e.currentX)%e.options.itemWidth,g=parseInt(Math.abs(e.currentX)/e.options.itemWidth,10),f>=.5*e.options.itemWidth&&(g+=1),h=g,e.itemIndex!=h&&setTimeout(function(){e._changeItemIndex(h)},d)):1==e.options.slideDirection&&(f=Math.abs(e.currentY)%e.options.itemHeight,g=parseInt(Math.abs(e.currentY)/e.options.itemHeight,10),f>=.5*e.options.itemHeight&&(g+=1),h=g,e.itemIndex!=h&&setTimeout(function(){e._changeItemIndex(h)},d))}},e.prototype._setY=function(b){var c=this;if("none"!=c.options.crossEffectType){var e=c.currentY;if(c.currentY=b,1==c.options.loop&&c.itemCount>1&&c.currentY!=e){var f=c.itemContainerDom.children();if(c.directionY>0){var g=f.eq(c.itemIndex%c.itemCount).index();if(c.currentY<-c.options.itemHeight*c.options.itemCount-1&&g==c.itemCount-1){var h=f.eq(0);h.remove(),a(c.itemContainerDom).append(h),c.itemIndex=c.itemIndex-1,c.currentY=parseInt(c.currentY)+parseInt(c.options.itemHeight)}}else if(c.directionY<0){var g=f.eq(c.itemIndex%c.itemCount).index();if(c.currentY>0&&0==g){var i=f.eq(c.itemCount-1);i.remove(),a(c.itemContainerDom).prepend(i),c.itemIndex=c.itemIndex+1,c.currentY=c.currentY-c.options.itemHeight}}}if(c.options.use3d?c._setItemContainerStyle({transform:c._getTranslate(0,c.currentY,0)}):d(c.itemContainerDom[0],"top",c.currentY),"scroll"==c.options.crossEffectType){var j=Math.abs(c.currentY)%c.options.itemHeight,k=parseInt(Math.abs(c.currentY)/c.options.itemHeight,10);j>=.5*c.options.itemHeight&&(k+=1);var l=k;c.itemIndex!=l&&c._changeItemIndex(l)}}else{var m=c.accMoving;if(Math.abs(c.accMoving-c.accMoved)>=.65*c.options.itemHeight/c.itemCount){var n=m-c.accMoved<0?1:-1;3==c.options.defaultDirection&&(n=m-c.accMoved>0?1:-1);var o=c.itemIndex+n;if(0>o){if(!c.options.loop)return;o=c.itemCount-1}else if(o>c.itemCount-1){if(!c.options.loop)return;o=0}c.accMoved=m,c._nothing(o)}}},e.prototype._setItemContainerStyle=function(a){var b=this;a&&b.itemContainerDom.css(a)},e.prototype._getTranslate=function(a,c,d){var a=a||"0",c=c||"0",d=d||"0";return b.transform3d?"translate3d("+a+"px, "+c+"px, "+d+"px)":"translate("+a+"px, "+c+"px)"},e.prototype._itemClick=function(a){var b=this,c=0;if(b.options.clickSupport){switch(b.hasNext()&&(c=b.itemIndex+1),a.stopPropagation(),a.preventDefault(),b.options.crossEffectType){case"fade":b.goToItem(c);break;case"slide":b.goToItem(c);break;case"fly":b.goToItem(c);break;case"fall":b.goToItem(c);break;case"null":b.goToItem(c);break;case"flip":b.goToItem(c)}c>=0&&c<=b.itemCount-1&&b._triggerSyncEnd(c/(b.itemCount-1),b.options.crossEffectTime)}},e.prototype._touchStart=function(a){var b=this;b.scrolling||(b.moveReadyEnable||(a.preventDefault(),a.stopPropagation()),b.startPageX=c(a,"pageX"),b.startPageY=c(a,"pageY"),b.basePageX=b.startPageX,b.basePageY=b.startPageY,b.accMoving=0,b.accMoved=0,b.scrolling=!0,b.moveReady=!1,b.duration=0,b.timeStamp=a.timeStamp||(new Date).getTime(),b._setTransition(!1))},e.prototype._touchMove=function(b){var d=this;if(d.scrolling){var e=c(b,"pageX"),f=c(b,"pageY"),g=0,h=0,i=0,j=0,k=0,l=0;if(d.moveReady){if(b.preventDefault(),b.stopPropagation(),g=e-d.basePageX,h=f-d.basePageY,-1==d.options.slideDirection){if(d.accMoving=d.accMoving+g,k=d.currentX+g,d.directionX=0===g?d.directionX:g>0?-1:1,"scroll"==d.options.crossEffectType){var m=(d.itemCount-1)*d.options.itemWidth;if(k>0&&(k=0),Math.abs(k)>m&&(k=-m),d._setX(k),a.isFunction(d.options.syncMoving)){var n={};n.relativePosition=Math.abs(d.currentX)/d.scrollWidth,2==d.options.defaultDirection&&(n.relativePosition=(d.scrollWidth-Math.abs(d.currentX))/d.scrollWidth),n.syncTo=d.options.syncTo,n.syncFrom=d.options.syncFrom,n.direction=0,n.type=0,d.options.syncMoving(n)}}else if(d.moveReadyEnable&&(d._setX(k),a.isFunction(d.options.syncMoving))){var n={};n.relativePosition=Math.abs(d.currentX)/d.scrollWidth,2==d.options.defaultDirection&&"flip"!=d.options.crossEffectType&&(n.relativePosition=(d.scrollWidth-Math.abs(d.currentX))/d.scrollWidth),n.syncTo=d.options.syncTo,n.syncFrom=d.options.syncFrom,n.type=1,n.direction=0,d.options.syncMoving(n)}}else if(1==d.options.slideDirection)if(l=d.currentY+h,d.accMoving=d.accMoving+h,d.directionY=0===h?d.directionY:h>0?-1:1,"scroll"==d.options.crossEffectType){var o=(d.itemCount-1)*d.options.itemHeight;l>0&&(l=0),Math.abs(l)>o&&(l=-o);{d.currentY}if(d._setY(l),a.isFunction(d.options.syncMoving)){var n={};n.relativePosition=Math.abs(d.currentY)/d.scrollHeight,n.dist=h/d.scrollerHeight,n.slideDirection=d.directionY,3==d.options.defaultDirection&&(n.relativePosition=(d.scrollHeight-Math.abs(d.currentY))/d.scrollHeight,n.dist=-1*n.dist,n.slideDirection=-1*n.slideDirection),n.syncTo=d.options.syncTo,n.syncFrom=d.options.syncFrom,n.direction=0,n.type=0,d.options.syncMoving(n)}}else if(d.moveReadyEnable&&(d._setY(l),a.isFunction(d.options.syncMoving))){var n={};n.dist=h/d.scrollerHeight,n.slideDirection=d.directionY,n.relativePosition=Math.abs(d.currentY)/d.scrollHeight,3==d.options.defaultDirection&&"flip"!=d.options.crossEffectType&&(n.relativePosition=(d.scrollHeight-Math.abs(d.currentY))/d.scrollHeight,n.dist=-1*n.dist,n.slideDirection=-1*n.slideDirection),n.syncTo=d.options.syncTo,n.syncFrom=d.options.syncFrom,n.type=1,n.direction=0,d.options.syncMoving(n)}}else if(i=Math.abs(e-d.startPageX),j=Math.abs(f-d.startPageY),-1==d.options.slideDirection){if(i>5&&i>j){if(!d._canMoved(e-d.startPageX,d.options.slideDirection))return;b.preventDefault(),b.stopPropagation(),d.moveReady=!0}}else if(1==d.options.slideDirection&&j>5&&j>i){if(!d._canMoved(f-d.startPageY,d.options.slideDirection))return;b.preventDefault(),b.stopPropagation(),d.moveReady=!0}{b.timeStamp||(new Date).getTime()}d.basePageX=e,d.basePageY=f}},e.prototype._touchEnd=function(a){var b=this;if(b.scrolling&&(b.scrolling=!1,b.moveReady)){b.duration=(a.timeStamp||(new Date).getTime())-b.timeStamp,b.scrolling=!1;var c={};if(-1==b.options.slideDirection)c.slideDirection=-1,c.direction=0,c.moved=b.basePageX-b.startPageX,c.moved>0?c.direction=-1:c.moved<0&&(c.direction=1);else if(1==b.options.slideDirection){c.slideDirection=1,c.direction=0;{b.options.itemHeight}c.moved=b.basePageY-b.startPageY,c.moved>0?c.direction=-1:c.moved<0&&(c.direction=1)}c.duration=b.duration,b._setTransition(!0),b._touchEndHandler(c)}},e.prototype._canMoved=function(a,b){var c=this;if(1==c.options.loop)return!0;if(1==b){if(Math.abs(c.currentY)>=(c.itemCount-1)*c.options.itemHeight&&0>a)return!1;if(a>0&&c.currentY>=0)return!1}if(-1==b){if(Math.abs(c.currentX)>=(c.itemCount-1)*c.options.itemWidth&&0>a)return!1;if(a>0&&c.currentX>=0)return!1}return!0},e.prototype._syncStateMove=function(b){var c=this,d=0;if(0==b.type)if(-1==c.options.slideDirection){var e=-c.scrollWidth*b.relativePosition;2==c.options.defaultDirection&&"flip"!=c.options.crossEffectType&&(e=-c.scrollWidth+c.scrollWidth*b.relativePosition);var f=Math.abs(e)%c.options.itemWidth;d=parseInt(Math.abs(e)/c.options.itemWidth,10),f>=.5*c.options.itemWidth&&(d+=1),d!=c.itemIndex&&(c.itemChanging=!1,c._setTransition(!1),c.goToItem(d))}else{var g=-c.scrollHeight*b.relativePosition;3==c.options.defaultDirection&&"flip"!=c.options.crossEffectType&&(g=-c.scrollHeight+c.scrollHeight*b.relativePosition);var f=Math.abs(g)%c.options.itemHeight;d=parseInt(Math.abs(g)/c.options.itemHeight,10),f>=.5*c.options.itemHeight&&(d+=1),d!=c.itemIndex&&(c.itemChanging=!1,c._setTransition(!1),c.goToItem(d))}var h={};a.extend(h,b),h.syncTo="",h.syncFrom="",1==b.direction&&(h.syncTo=c.options.syncTo,c.options.syncMoving(h)),-1==b.direction&&(h.syncFrom=c.options.syncFrom,c.options.syncMoving(h))},e.prototype._syncMove=function(b){var c=this;if("scroll"==c.options.crossEffectType||"slide"==c.options.crossEffectType&&1==b.type){if(c._setTransition(!1),-1==c.options.slideDirection){var d=-c.scrollWidth*b.relativePosition;2==c.options.defaultDirection&&(d=-c.scrollWidth+c.scrollWidth*b.relativePosition),void 0!=b.dist&&1==c.options.loop?2==c.options.defaultDirection?(c.directionX=-1*b.slideDirection,c._setX(c.currentX-b.dist*c.scrollerWidth)):(c.directionX=b.slideDirection,c._setX(c.currentX+b.dist*c.scrollerWidth)):c._setX(d);var e={};a.extend(e,b),e.syncTo="",e.syncFrom="",1==b.direction&&(e.syncTo=c.options.syncTo,c.options.syncMoving(e)),-1==b.direction&&(e.syncFrom=c.options.syncFrom,c.options.syncMoving(e))}else if(1==c.options.slideDirection){var f=-c.scrollHeight*b.relativePosition;3==c.options.defaultDirection&&(f=-c.scrollHeight+c.scrollHeight*b.relativePosition),void 0!=b.dist&&1==c.options.loop?3==c.options.defaultDirection?(c.directionY=-1*b.slideDirection,c._setY(c.currentY-b.dist*c.scrollerHeight)):(c.directionY=b.slideDirection,c._setY(c.currentY+b.dist*c.scrollerHeight)):c._setY(f);var e={};a.extend(e,b),e.syncTo="",e.syncFrom="",-1!=b.direction&&(e.syncTo=c.options.syncTo,c.options.syncMoving(e)),1!=b.direction&&(e.syncFrom=c.options.syncFrom,c.options.syncMoving(e))}}else c._syncStateMove(b)},e.prototype._syncStateEnd=function(b){var c=this,d=0;if(-1==c.options.slideDirection){var e=-c.scrollWidth*b.relativePosition;2==c.options.defaultDirection&&"flip"!=c.options.crossEffectType&&(e=-c.scrollWidth+c.scrollWidth*b.relativePosition);var f=Math.abs(e)%c.options.itemWidth;d=parseInt(Math.abs(e)/c.options.itemWidth,10),f>=.5*c.options.itemWidth&&(d+=1),d*c.options.itemWidth!=Math.abs(c.currentX)&&(c.itemChanging=!1,c._setTransition(!1),c.goToItem(d))}else if(1==c.options.slideDirection){var g=-c.scrollHeight*b.relativePosition;3==c.options.defaultDirection&&"flip"!=c.options.crossEffectType&&(g=-c.scrollHeight+c.scrollHeight*b.relativePosition);var f=Math.abs(g)%c.options.itemHeight;d=parseInt(Math.abs(g)/c.options.itemHeight,10),f>=.5*c.options.itemHeight&&(d+=1),d*c.options.itemHeight!=Math.abs(c.currentY)&&(c.itemChanging=!1,c._setTransition(!1),c.goToItem(d))}var h={};a.extend(h,b),h.syncTo="",h.syncFrom="",-1!=b.direction&&(h.syncTo=c.options.syncTo,c.options.syncMoveEnd(h)),1!=b.direction&&(h.syncFrom=c.options.syncFrom,c.options.syncMoveEnd(h))},e.prototype._syncEnd=function(b){var c=this;if("scroll"==c.options.crossEffectType){if(-1==c.options.slideDirection){var d=-c.scrollWidth*b.relativePosition;2==c.options.defaultDirection&&(d=-c.scrollWidth+c.scrollWidth*b.relativePosition),c.scrollTo(d,0,b.time);var e={};a.extend(e,b),e.syncTo="",e.syncFrom="",-1!=b.direction&&(e.syncTo=c.options.syncTo,c.options.syncMoveEnd(e)),1!=b.direction&&(e.syncFrom=c.options.syncFrom,c.options.syncMoveEnd(e))}else if(1==c.options.slideDirection){var f=-c.scrollHeight*b.relativePosition;3==c.options.defaultDirection&&(f=-c.scrollHeight+c.scrollHeight*b.relativePosition),c.scrollTo(0,f,b.time);var e={};a.extend(e,b),e.syncTo="",e.syncFrom="",-1!=b.direction&&(e.syncTo=c.options.syncTo,c.options.syncMoveEnd(e)),1!=b.direction&&(e.syncFrom=c.options.syncFrom,c.options.syncMoveEnd(e))}}else c._syncStateEnd(b)},e.prototype._momentum=function(a,b){var c=6e-4,d=Math.abs(a)/b,e=d*d/(2*c),f=d/c;return{dist:e,time:f}},e.prototype._momentum2=function(a,b,c,d){var e=6e-4,f=Math.abs(a)/b,g=f*f/(2*e),h=0;return a>0&&g>c?(f=f*c/g,g=c):0>a&&g>d&&(f=f*d/g,g=d),g*=0>a?-1:1,h=f/e,{dist:Math.round(g),time:Math.round(h)}},e.prototype._touchEndHandler=function(a){var b=this;if("scroll"!=b.options.crossEffectType){if("none"==b.options.crossEffectType)return b.scrolling=!1,b._goToItemEvent=a,void b.goToItem(b.itemIndex+1);if("slide"==b.options.crossEffectType){var c=b.itemIndex;return-1==a.slideDirection?Math.abs(a.moved)>=50&&(c+=a.direction):Math.abs(a.moved)>=50&&(c+=a.direction),b.goToItem(c),void(-1==b.options.slideDirection?b._triggerSyncEnd(Math.abs(b.currentX)/b.scrollWidth,b.options.crossEffectTime):1==b.options.slideDirection&&b._triggerSyncEnd(Math.abs(b.currentY)/b.scrollHeight,b.options.crossEffectTime))}b.goToItem(b.itemIndex+1),"none"!=b.options.crossEffectType&&b._triggerSyncEnd((b.itemIndex+1)/(b.itemCount-1),b.options.crossEffectTime)}else{if(b.scrolling=!1,a.duration>=300)return;var d=a.moved,e=0,f=0;if(-1==b.options.slideDirection)Math.abs(b.currentX)==(b.itemCount-1)*b.options.itemWidth&&(d=0),e=-b.currentX,f=b.currentX+b.scrollerWidth-b.options.itemWidth;else{if(1!=b.options.slideDirection)return;Math.abs(b.currentY)==(b.itemCount-1)*b.options.itemHeight&&(d=0),e=-b.currentY,f=b.currentY+b.scrollerHeight-b.options.itemHeight}var g=b._momentum2(d,a.duration,e,f);if(0!=d){var h={};h.syncTo=b.options.syncTo,h.syncFrom=b.options.syncFrom,h.direction=0,h.type=0,-1==b.options.slideDirection?(b.scrollTo(b.currentX+g.dist,0,g.time),h.relativePosition=Math.abs(b.currentX)/b.scrollWidth,2==b.options.defaultDirection&&(h.relativePosition=(b.scrollWidth-Math.abs(b.currentX))/b.scrollWidth),h.time=g.time,b.options.syncMoveEnd(h)):1==b.options.slideDirection&&(b.scrollTo(0,b.currentY+g.dist,g.time),h.relativePosition=Math.abs(b.currentY)/b.scrollHeight,3==b.options.defaultDirection&&(h.relativePosition=(b.scrollHeight-Math.abs(b.currentY))/b.scrollHeight),h.time=g.time,b.options.syncMoveEnd(h))}}},e.prototype._triggerSyncEnd=function(a,b){var c=this,d={};d.syncTo=c.options.syncTo,d.syncFrom=c.options.syncFrom,d.direction=0,d.type=1,d.relativePosition=a,(2==c.options.defaultDirection||3==c.options.defaultDirection)&&"flip"!=c.options.crossEffectType&&(d.relativePosition=1-a),d.time=b,c.options.syncMoveEnd(d)},e.prototype.handleEvent=function(a){var c=this;switch(a.type){case b.touchStartEvent:c._touchStart(a);break;case b.touchMoveEvent:c._touchMove(a);break;case b.touchEndEvent:c._touchEnd(a);break;case"click":c._itemClick(a);break;case b.mouseOut:c._touchEnd(a)}},e.prototype.start=function(){var c=this;if(!c.isStoped)return!0;c.moveReadyEnable=!0,("fly"==c.options.crossEffectType||"fade"==c.options.crossEffectType||"fall"==c.options.crossEffectType||"flip"==c.options.crossEffectType)&&(c.moveReadyEnable=!1),"null"==c.options.crossEffectType&&(c.moveReadyEnable=!1),c.options.slideSupport&&(c.dom[0].addEventListener(b.touchStartEvent,c,!1),c.dom[0].addEventListener(b.touchMoveEvent,c,!1),c.dom[0].addEventListener(b.touchEndEvent,c,!1),b.touch||c.dom[0].addEventListener(b.mouseOut,c,!1)),c.options.clickSupport&&c.dom[0].addEventListener("click",c,!1),c.options.clickSupport||c.options.slideSupport?c.dom.css({"pointer-events":"auto",cursor:"pointer"}):(c.dom.css({"pointer-events":"none"}),c.dom.find(">.mci-ss-oh").css({"pointer-events":"none"}),c.dom.find(">.mci-ss-oh >.mci-ss-w").css({"pointer-events":"none"}),c.itemContainerDom.find(c.options.itemCls).css({"pointer-events":"none"}));var d=c.options.autoPlayInterval+c.options.crossEffectTime;1==c.options.autoPlay&&setTimeout(function(){c.loopHandlerCount=1,c.loopHandler=setInterval(function(){return-1!=c.options.loopTime&&c.loopHandlerCount>=c.options.loopTime*c.itemCount?void clearInterval(c.loopHandler):(2==c.options.defaultDirection||3==c.options.defaultDirection?c.goToPrev():c.goToNext(),void(c.loopHandlerCount=c.loopHandlerCount+1))},d)},c.options.autoPlayDelay||1e3),a.isFunction(c.options.startedHanlder)&&c.options.startedHanlder(this),c._startChildControl()},e.prototype._startChildControl=function(){var b=this,c=a(b.itemContainerDom).children().eq(b.itemIndex).attr("id");if(b.childControl){var d=b.childControl;for(var e in d)d[e].options.boundTargetRes==c&&a.isFunction(d[e].start)&&(d[e].isRunning||(d[e].start(),d[e].isRunning=!0))}},e.prototype.stop=function(){var a=this;a.dom[0].removeEventListener("click",a),void 0!=a.loopHandler&&clearInterval(a.loopHandler),a.options.slideSupport&&(a.dom[0].removeEventListener(b.touchStartEvent,a),a.dom[0].removeEventListener(b.touchMoveEvent,a),a.dom[0].removeEventListener(b.touchEndEvent,a)),a.isStoped=!0,a.isPlay=!1},e.prototype.play=function(){var a=this;if(1!=a.isPlay){a.isPlay=!0;var b=a.options.autoPlayInterval+a.options.crossEffectTime;(a.options.loopTime>=1||1==a.options.loop)&&setTimeout(function(){a.loopHandlerCount=1,a.loopHandler=setInterval(function(){return-1!=a.options.loopTime&&a.loopHandlerCount>=a.options.loopTime*a.itemCount?void clearInterval(a.loopHandler):(2==a.options.defaultDirection||3==a.options.defaultDirection?a.goToPrev():a.goToNext(),void(a.loopHandlerCount=a.loopHandlerCount+1))},b)},a.options.autoPlayDelay||1e3)}},e.prototype.reset=function(){var a=this;a.itemIndex!=a.options.defaultIndex&&a.goToItem(a.options.defaultIndex)},window.SlideShow=e,e});